library ieee;
use ieee.std_logic_1164.all;

entity top_task2 is
    port (
        clock    : in  std_logic;  -- system clock
        reset_N  : in  std_logic;  -- active low reset from board
        ps2_clk  : in  std_logic;
        ps2_data : in  std_logic;

        seg0     : out std_logic_vector(6 downto 0);
        seg1     : out std_logic_vector(6 downto 0);
        seg2     : out std_logic_vector(6 downto 0);
        seg3     : out std_logic_vector(6 downto 0);
        seg4     : out std_logic_vector(6 downto 0);
        seg5     : out std_logic_vector(6 downto 0)
    );
end top_task2;

architecture rtl of top_task2 is

    signal reset      : std_logic;
    signal char_code  : std_logic_vector(7 downto 0);
    signal char_ready : std_logic;

begin

    -- active-high internal reset
    reset <= not reset_N;

    --------------------------------------------------------------------
    -- Keyboard driver (your Task-1 module)
    --------------------------------------------------------------------
    keyboard_inst : entity work.keyboard
        port map (
            sys_clk    => clock,
            reset      => reset,
            ps2_clk    => ps2_clk,
            ps2_data   => ps2_data,
            char_code  => char_code,
            char_ready => char_ready
        );

    --------------------------------------------------------------------
    -- Scancode display (Task 2)
    --------------------------------------------------------------------
    display_inst : entity work.scancode_display
        port map (
            sys_clk    => clock,
            reset      => reset,
            char_code  => char_code,
            char_ready => char_ready,
            seg0       => seg0,
            seg1       => seg1,
            seg2       => seg2,
            seg3       => seg3,
            seg4       => seg4,
            seg5       => seg5
        );

end architecture rtl;